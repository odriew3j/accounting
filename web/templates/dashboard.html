{% load static %}

<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>داشبورد</title>
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'css/main.css' %}">
</head>
<body>
    <div class="container">
        <h2 class="text-center my-4">داشبورد</h2>
        <div id="success-message" style="display: none; color: green"></div>
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-info">{{ message }}</div>
            {% endfor %}
        {% endif %}

        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="income-tab" data-bs-toggle="tab" href="#income" role="tab" aria-controls="income" aria-selected="true">ثبت درآمد</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="expense-tab" data-bs-toggle="tab" href="#expense" role="tab" aria-controls="expense" aria-selected="false">ثبت هزینه</a>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent">
            <div class="tab-pane fade show active" id="income" role="tabpanel" aria-labelledby="income-tab">
                <h3 class="my-4">ثبت درآمد</h3>
                <form method="post" action="">
                    {% csrf_token %}
                    {{ income_form.as_p }}
                    <button type="submit" name="income_submit" class="btn btn-primary">ثبت درآمد</button>
                </form>
                <h3 class="my-4">لیست درآمدها</h3>
                <table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th>توضیحات</th>
                            <th>تاریخ</th>
                            <th>مبلغ</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for income in incomes %}
                        <tr>
                            <td>{{ income.text }}</td>
                            <td>{{ income.date }}</td>
                            <td>{{ income.amount }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <h4>مجموع درآمدها: {{ total_income }}</h4>
            </div>
            <div class="tab-pane fade" id="expense" role="tabpanel" aria-labelledby="expense-tab">
                <h3 class="my-4">ثبت هزینه</h3>
                <form method="post" action="">
                    {% csrf_token %}
                    {{ expense_form.as_p }}
                    <button type="submit" name="expense_submit" class="btn btn-primary">ثبت هزینه</button>
                </form>
                <h3 class="my-4">لیست هزینه‌ها</h3>
                <table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th>توضیحات</th>
                            <th>تاریخ</th>
                            <th>مبلغ</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for expense in expenses %}
                        <tr>
                            <td>{{ expense.text }}</td>
                            <td>{{ expense.date }}</td>
                            <td>{{ expense.amount }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
                <h4>مجموع هزینه‌ها: {{ total_expense }}</h4>
            </div>
        </div>
    </div>
    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
</body>
</html>
